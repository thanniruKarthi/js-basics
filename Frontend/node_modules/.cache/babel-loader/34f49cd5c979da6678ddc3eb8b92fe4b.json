{"ast":null,"code":"import Vue from 'vue';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport SearchGlobal from './searchGlobal.vue';\nvar test;\nVue.use(VueAxios, axios);\nexport default {\n  name: \"api-integration\",\n\n  data() {\n    return {\n      empid: \"\",\n      numberRules: [v => !!v || \"input is required\", v => !isNaN(parseFloat(v)) && v >= 0 && v <= 99999 || \"input must be number && max 5 numbers\"],\n      age: \"\",\n      list: [],\n      dialog: false,\n      arr: [],\n      flag: true\n    };\n  },\n\n  mounted() {\n    Vue.axios.get(\"http://127.0.0.1:40193/readage\").then(resp => {\n      this.list = resp.data;\n    });\n  },\n\n  methods: {\n    async sendData() {\n      await Vue.axios.post(`http://127.0.0.1:40193/createage`, {\n        empid: this.empid,\n        age: this.age\n      });\n      this.dialog = false;\n      Vue.axios.get(\"http://127.0.0.1:40193/readage\").then(resp => {\n        this.list = resp.data;\n      });\n      this.$refs.form.reset();\n    },\n\n    async deleting(id) {\n      await Vue.axios.delete(`http://127.0.0.1:40193/deleteage/${id}`);\n      Vue.axios.get(\"http://127.0.0.1:40193/readage\").then(resp => {\n        this.list = resp.data;\n      });\n    },\n\n    editItem(item) {\n      this.flag = false;\n      this.dialog = true;\n      test = item;\n      this.empid = item.empid;\n      this.age = item.age;\n    },\n\n    async edit() {\n      this.flag = true;\n      this.dialog = false;\n      test.empid = this.empid;\n      test.age = this.age;\n      this.$refs.form.reset();\n      await axios.put(`http://127.0.0.1:40193/updateage/${test.id}`, {\n        empid: test.empid,\n        age: test.age\n      }).then(response => {\n        console.log(response);\n      });\n      console.log(test.name);\n      this.sendData();\n    },\n\n    change(message) {\n      this.message = message;\n    },\n\n    funSearch(val) {\n      this.list = val.data;\n    }\n\n  },\n  components: {\n    SearchGlobal\n  }\n};","map":{"version":3,"mappings":"AA6FA;AACA;AACA;AACA;AACA;AACAA;AACA;EACAC,uBADA;;EAEAC;IACA;MACAC,SADA;MAEAC,cACAC,+BADA,EAEAA,6FAFA,CAFA;MAMAC,OANA;MAOAC,QAPA;MAQAC,aARA;MASAC,OATA;MAUAC;IAVA;EAYA,CAfA;;EAgBAC;IACAX,gDACAY,IADA,CACAC;MACA;IACA,CAHA;EAIA,CArBA;;EAsBAC;IACA;MACA;QACAX,iBADA;QAEAG;MAFA;MAIA;MACAN,gDACAY,IADA,CACAC;QACA;MACA,CAHA;MAIA;IACA,CAZA;;IAaA;MACA;MACAb,gDACAY,IADA,CACAC;QACA;MACA,CAHA;IAIA,CAnBA;;IAoBAE;MACA;MACA;MACAC;MACA;MACA;IACA,CA1BA;;IA2BA;MACA;MACA;MACAA;MACAA;MACA;MACA;QACAb,iBADA;QAEAG;MAFA,GAIAM,IAJA,CAIAK;QACAC;MACA,CANA;MAOAA;MACA;IACA,CA1CA;;IA2CAC,gBACA;MACA;IACA,CA9CA;;IA+CAC;MACA;IACA;;EAjDA,CAtBA;EAyEAC;IAAAC;EAAA;AAzEA","names":["Vue","name","data","empid","numberRules","v","age","list","dialog","arr","flag","mounted","then","resp","methods","editItem","test","response","console","change","funSearch","components","SearchGlobal"],"sourceRoot":"src/components","sources":["ageTable.vue"],"sourcesContent":["<template>\n  \n    <v-app>\n      <searchGlobal @funSearchSender=\"funSearch($event)\"/>\n      <v-form method=\"post\" ref=\"form\" lazy-validation>\n        <v-dialog v-model=\"dialog\">\n          <template v-slot:activator=\"{on}\">\n            <v-flex text-right align-right>\n              <v-btn class=\"blue\" v-on=\"on\">\n                <v-icon dark>\n                  mdi-plus\n                </v-icon>\n              </v-btn>\n            </v-flex>\n          </template>\n          <v-card>\n          <v-card-text class=\"white\">\n  \n            <v-container>\n              <v-row>\n                <v-col md=\"4\">\n                  <v-text-field v-model=\"empid\"  label=\"empid\" value=\"empid\" required :rules=\"numberRules\"></v-text-field>\n                </v-col>\n                <v-col  md=\"4\">\n                  <v-text-field v-model=\"age\" label=\"age\" required :rules=\"numberRules\"></v-text-field>\n                </v-col>\n              \n                <v-btn elevation=\"2\" class=\"blue\" @click=\"sendData\" v-if=\"flag\">submit</v-btn>\n                <v-btn elevation=\"2\" class=\"blue\" @click=\"edit\" v-else>edit</v-btn>\n              </v-row>\n            </v-container>\n  \n          </v-card-text>\n        </v-card>\n        </v-dialog>\n      </v-form>\n  \n      <v-simple-table>\n        <template v-slot:default>\n          <thead>\n            <tr>\n              <th>\n                id\n              </th>\n              <th>\n                empid\n              </th>\n              <th>\n                age\n              </th>\n              \n              <th>\n                edit\n              </th>\n              <th>\n                delete\n              </th>\n  \n  \n            </tr>\n          </thead>\n          <tbody class=\"text-left\">\n            <tr v-for=\"item in list\" v-bind:key=\"item.id\">\n              <td>{{item.id}}</td>\n              <td>{{item.empid}}</td>\n              <td>{{item.age}}</td>\n              <td>\n                <v-btn class=\"mx-1\" fab dark small color=\"cyan\" @click=\"editItem(item)\" >\n                  <v-icon dark>\n                    mdi-pencil\n                  </v-icon>\n                </v-btn>\n  \n              </td>\n              <td>\n                <v-btn class=\"mx-1\" fab dark small color=\"cyan\" @click=\"deleting(item.id)\" >\n                  <v-icon dark>\n                    mdi-delete\n                  </v-icon>\n                </v-btn>\n  \n              </td>\n  \n  \n            </tr>\n          </tbody>\n        </template>\n  \n      </v-simple-table>\n  \n    </v-app>\n  </template>\n  <script>\n  import Vue from 'vue';\n  import axios from 'axios'\n  import VueAxios from 'vue-axios'\nimport SearchGlobal from './searchGlobal.vue';\n  var test;\n  Vue.use(VueAxios, axios)\n  export default {\n    name: \"api-integration\",\n    data() {\n        return {\n            empid: \"\",\n            numberRules: [\n                v => !!v || \"input is required\",\n                v => (!isNaN(parseFloat(v)) && v >= 0 && v <= 99999) || \"input must be number && max 5 numbers\",\n            ],\n            age: \"\",\n            list: [],\n            dialog: false,\n            arr: [],\n            flag: true\n        };\n    },\n    mounted() {\n        Vue.axios.get(\"http://127.0.0.1:40193/readage\")\n            .then((resp) => {\n            this.list = resp.data;\n        });\n    },\n    methods: {\n        async sendData() {\n            await Vue.axios.post(`http://127.0.0.1:40193/createage`, {\n                empid: this.empid,\n                age: this.age,\n            });\n            this.dialog = false;\n            Vue.axios.get(\"http://127.0.0.1:40193/readage\")\n                .then((resp) => {\n                this.list = resp.data;\n            });\n            this.$refs.form.reset();\n        },\n        async deleting(id) {\n            await Vue.axios.delete(`http://127.0.0.1:40193/deleteage/${id}`);\n            Vue.axios.get(\"http://127.0.0.1:40193/readage\")\n                .then((resp) => {\n                this.list = resp.data;\n            });\n        },\n        editItem(item) {\n            this.flag = false;\n            this.dialog = true;\n            test = item;\n            this.empid = item.empid;\n            this.age = item.age;\n        },\n        async edit() {\n            this.flag = true;\n            this.dialog = false;\n            test.empid = this.empid;\n            test.age = this.age;\n            this.$refs.form.reset();\n            await axios.put(`http://127.0.0.1:40193/updateage/${test.id}`, {\n                empid: test.empid,\n                age: test.age,\n            })\n                .then(response => {\n                console.log(response);\n            });\n            console.log(test.name);\n            this.sendData();\n        },\n        change(message)\n    {\n      this.message=message\n    },\n    funSearch(val){\n      this.list = val.data\n    }\n    },\n    components: { SearchGlobal }\n}\n  </script>"]},"metadata":{},"sourceType":"module"}