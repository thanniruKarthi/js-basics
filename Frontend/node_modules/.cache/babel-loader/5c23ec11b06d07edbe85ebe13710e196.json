{"ast":null,"code":"import Vue from 'vue';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport searchGlobal from './searchGlobal.vue';\nvar test;\nVue.use(VueAxios, axios);\nexport default {\n  name: 'api-integration',\n\n  data() {\n    return {\n      empid: '',\n      numberRules: [v => !!v || 'input is required', v => !isNaN(parseFloat(v)) && v >= 0 && v <= 99999 || 'input must be number && max 5 numbers'],\n      name: '',\n      nameRules: [v => !!v || 'input is required', v => v && v.length <= 20 || 'input must be less than 15 characters', v => /^[a-zA-z]+$/.test(v) || 'input is not valid'],\n      dept: '',\n      list: [],\n      dialog: false,\n      arr: [],\n      flag: true,\n      message: ''\n    };\n  },\n\n  mounted() {\n    Vue.axios.get('http://127.0.0.1:40193/readdept').then(resp => {\n      this.list = resp.data;\n    });\n  },\n\n  methods: {\n    async sendData() {\n      await Vue.axios.post(`http://127.0.0.1:40193/createdept`, {\n        empid: this.empid,\n        name: this.name,\n        dept: this.dept\n      });\n      this.dialog = false;\n      Vue.axios.get('http://127.0.0.1:40193/readdept').then(resp => {\n        this.list = resp.data;\n      });\n      this.$refs.form.reset();\n    },\n\n    async deleting(id) {\n      await Vue.axios.delete(`http://127.0.0.1:40193/deletedept/${id}`);\n      Vue.axios.get('http://127.0.0.1:40193/readdept').then(resp => {\n        this.list = resp.data;\n      });\n    },\n\n    editItem(item) {\n      this.flag = false;\n      this.dialog = true;\n      test = item;\n      this.empid = item.empid;\n      this.name = item.name;\n      this.dept = item.dept;\n    },\n\n    async edit() {\n      this.flag = true;\n      this.dialog = false;\n      test.empid = this.empid;\n      test.name = this.name;\n      test.dept = this.dept;\n      this.$refs.form.reset();\n      await axios.put(`http://127.0.0.1:40193/updatedept/${test.id}`, {\n        empid: test.empid,\n        name: test.name,\n        dept: test.dept\n      }).then(response => {\n        console.log(response);\n      });\n      console.log(test.name);\n      this.sendData();\n    },\n\n    change(message) {\n      this.message = message;\n    },\n\n    funSearch(val) {\n      this.list = val.data;\n    }\n\n  },\n  components: {\n    searchGlobal\n  }\n};","map":{"version":3,"mappings":"AAmGA;AACA;AACA;AACA;AACA;AACAA;AACA;EACAC,uBADA;;EAEAC;IACA;MACAC,SADA;MAEAC,cACAC,+BADA,EAEAA,6FAFA,CAFA;MAMAJ,QANA;MAOAK,YACAD,+BADA,EAEAA,mEAFA,EAGAA,kDAHA,CAPA;MAYAE,QAZA;MAaAC,QAbA;MAcAC,aAdA;MAeAC,OAfA;MAgBAC,UAhBA;MAiBAC;IAjBA;EAoBA,CAvBA;;EAwBAC;IAEAb,iDAEAc,IAFA,CAEAC;MACA;IACA,CAJA;EAKA,CA/BA;;EAgCAC;IACA;MACA;QACAb,iBADA;QAEAF,eAFA;QAGAM;MAHA;MAMA;MACAP,iDAEAc,IAFA,CAEAC;QACA;MACA,CAJA;MAKA;IAEA,CAhBA;;IAiBA;MACA;MAEAf,iDAEAc,IAFA,CAEAC;QACA;MACA,CAJA;IAMA,CA1BA;;IA2BAE;MACA;MACA;MACAC;MACA;MACA;MACA;IAGA,CApCA;;IAqCA;MACA;MACA;MACAA;MACAA;MACAA;MACA;MACA;QACAf,iBADA;QAEAF,eAFA;QAGAM;MAHA,GAMAO,IANA,CAMAK;QACAC;MACA,CARA;MASAA;MACA;IAEA,CAxDA;;IA0DAC,gBACA;MACA;IACA,CA7DA;;IA8DAC;MACA;IACA;;EAhEA,CAhCA;EAqGAC;IAAAC;EAAA;AArGA","names":["Vue","name","data","empid","numberRules","v","nameRules","dept","list","dialog","arr","flag","message","mounted","then","resp","methods","editItem","test","response","console","change","funSearch","components","searchGlobal"],"sourceRoot":"src/components","sources":["deptTable.vue"],"sourcesContent":["<template>\n  <v-app>\n    <searchGlobal @funSearchSender=\"funSearch($event)\"/>\n    <v-form methos=\"post\" ref=\"form\" lazy-validation>\n      <v-dialog v-model=\"dialog\">\n        <template v-slot:activator=\"{on}\">\n          <v-flex text-right align-right>\n            <v-btn class=\"blue\" v-on=\"on\">\n              <v-icon dark>\n                mdi-plus\n              </v-icon>\n            </v-btn>\n          </v-flex>\n        </template>\n        <v-card>\n        <v-card-text class=\"white\">\n          <v-container>\n            <v-row>\n              <v-col md=\"4\">\n                <v-text-field v-model=\"empid\"  label=\"empid\" value=\"empid\" required :rules=\"numberRules\"></v-text-field>\n              </v-col>\n              <v-col  md=\"4\">\n                <v-text-field v-model=\"name\" label=\"name\" required :rules=\"nameRules\"></v-text-field>\n              </v-col>\n              <v-col  md=\"4\">\n                <v-text-field v-model=\"dept\"  label=\"dept\" required :rules=\"nameRules\"></v-text-field>\n              </v-col>\n              <v-btn elevation=\"2\" class=\"blue\" @click=\"sendData\" v-if=\"flag\">submit</v-btn>\n              <v-btn elevation=\"2\" class=\"blue\" @click=\"edit\" v-else>edit</v-btn>\n            </v-row>\n          </v-container>\n\n        </v-card-text>\n      </v-card>\n      </v-dialog>\n    </v-form>\n\n    <v-simple-table>\n      <template v-slot:default>\n        <thead>\n          <tr>\n            <th>\n              id\n            </th>\n            <th>\n              empid\n            </th>\n            <th>\n              name\n            </th>\n            <th>\n              dept\n            </th>\n            <th>\n              edit\n            </th>\n            <th>\n              delete\n            </th>\n\n\n          </tr>\n        </thead>\n        <tbody class=\"text-left\">\n          <tr v-for=\"item in list\" v-bind:key=\"item.id\">\n            <td>{{item.id}}</td>\n            <td>{{item.empid}}</td>\n            <td>{{item.name|dot-dot}}</td>\n            <td>{{item.dept}}</td>\n            <td>\n              <v-btn class=\"mx-1\" fab dark small color=\"cyan\" @click=\"editItem(item)\" >\n                <v-icon dark>\n                  mdi-pencil\n                </v-icon>\n              </v-btn>\n\n            </td>\n            <td>\n              <v-btn class=\"mx-1\" fab dark small color=\"cyan\" @click=\"deleting(item.id)\" >\n                <v-icon dark>\n                  mdi-delete\n                </v-icon>\n              </v-btn>\n\n            </td>\n\n\n          </tr>\n        </tbody>\n      </template>\n\n    </v-simple-table>\n    <h1>{{this.search}}</h1>\n\n  </v-app>\n</template>\n\n\n<script>\nimport Vue from 'vue';\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\nimport searchGlobal from './searchGlobal.vue';\nvar test;\nVue.use(VueAxios, axios)\nexport default {\n  name: 'api-integration',\n  data() {\n    return {\n      empid: '',\n      numberRules:[\n      v => !!v || 'input is required',\n      v => (!isNaN(parseFloat(v)) && v >= 0 && v <=99999)||'input must be number && max 5 numbers',\n      ],\n      name: '',\n      nameRules: [\n        v => !!v || 'input is required',\n        v => (v && v.length <= 20) || 'input must be less than 15 characters',\n        v=>/^[a-zA-z]+$/.test(v)||'input is not valid'\n      ],\n      dept: '',\n      list: [],\n      dialog: false,\n      arr: [],\n      flag:true,\n      message:''\n      \n    }\n  },\n  mounted() {\n\n    Vue.axios.get('http://127.0.0.1:40193/readdept')\n\n      .then((resp) => {\n        this.list = resp.data;\n      })\n  },\n  methods: {\n    async sendData() {\n      await Vue.axios.post(`http://127.0.0.1:40193/createdept`, {\n        empid: this.empid,\n        name: this.name,\n        dept: this.dept,\n        \n      })\n      this.dialog = false\n      Vue.axios.get('http://127.0.0.1:40193/readdept')\n\n        .then((resp) => {\n          this.list = resp.data;\n        });\n        this.$refs.form.reset()\n\n    },\n    async deleting(id) {\n      await Vue.axios.delete(`http://127.0.0.1:40193/deletedept/${id}`)\n\n      Vue.axios.get('http://127.0.0.1:40193/readdept')\n\n        .then((resp) => {\n          this.list = resp.data;\n        })\n\n    },\n    editItem(item) {\n      this.flag=false\n      this.dialog = true\n      test = item\n      this.empid = item.empid\n      this.name = item.name\n      this.dept = item.dept\n\n\n    },\n    async edit() {\n      this.flag=true\n      this.dialog=false\n      test.empid = this.empid\n      test.name = this.name\n      test.dept = this.dept\n      this.$refs.form.reset()\n      await axios.put(`http://127.0.0.1:40193/updatedept/${test.id}`, {\n        empid: test.empid,\n        name: test.name,\n        dept: test.dept\n\n      })\n        .then(response => {\n          console.log(response);\n        });\n      console.log(test.name)\n      this.sendData()\n      \n    },\n   \n    change(message)\n    {\n      this.message=message\n    },\n    funSearch(val){\n      this.list = val.data\n    }\n\n    \n  },\n\n  components:{searchGlobal}\n\n\n}\n</script>"]},"metadata":{},"sourceType":"module"}